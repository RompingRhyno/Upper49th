@using Customer.Membership.Models

@model MembershipModel
@{
    Layout = "_Layout";
}

<h2>Choose a Membership Plan</h2>

<div id="plans">
    @foreach (var plan in Model.AvailablePlans)
    {
        <button type="button" class="membership-btn" data-plan="@plan">@plan</button>
    }
</div>

<form method="post" asp-action="Index">
    <input type="hidden" id="SelectedPlan" name="SelectedPlan" />

    <button type="submit">Submit and Pay</button>
</form>

@section Scripts {
    <script>
        const availablePlans = @Html.Raw(Json.Serialize(Model.AvailablePlans));
        console.log("Available plans:", availablePlans);
        let selectedPlan = "";

        document.querySelectorAll(".membership-btn").forEach(btn => {
            btn.addEventListener("click", function () {
                selectedPlan = this.dataset.plan;
                document.getElementById("SelectedPlan").value = selectedPlan;
                console.log("Selected plan:", selectedPlan);
            });
        });
    </script>
}
